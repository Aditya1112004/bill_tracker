/* Simple, modern theme for Analysis page */

:root {
  --bg: #f7f7fb;
  --card-bg: #ffffff;
  --text: #212529;
  --muted: #6c757d;
  --primary: #3a86ff;
  --primary-600: #2f74e0;
  --success: #22a06b;
  --danger: #e55353;
  --warning: #f4a100;
  --purple: #7b34df;
  --border: #e9ecef;
  --table-row: #f3f7ff;
  --radius: 10px;
  --shadow-sm: 0 1px 3px rgba(16, 24, 40, 0.08);
  --shadow-md: 0 6px 18px rgba(16, 24, 40, 0.10);
  --shadow-lg: 0 12px 24px rgba(16, 24, 40, 0.12);
  --space-1: 6px;
  --space-2: 10px;
  --space-3: 14px;
  --space-4: 18px;
  --space-5: 24px;
}

/* Page */
body {
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  background: var(--bg);
  color: var(--text);
}

.container {
  width: 94%;
  max-width: 1120px; /* tighter page width */
  margin: 28px auto;
  background: var(--card-bg);
  padding: var(--space-4);
  border-radius: var(--radius);
  box-shadow: var(--shadow-sm);
}

.main-title {
  color: var(--text);
  font-size: 28px;
  font-weight: 700;
  letter-spacing: 0.3px;
  text-align: center;
  margin: 0 0 var(--space-4);
}

h2 {
  color: var(--text);
  font-weight: 700;
  font-size: 18px;
  margin: 0 0 var(--space-3);
}

/* Buttons */
.home-button,
.form-group button[type="submit"],
.add-purchase-btn,
.action-buttons button,
.action-buttons a,
.remove-purchase-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px 14px;
  border-radius: 8px;
  border: 1px solid transparent;
  text-decoration: none;
  cursor: pointer;
  font-weight: 600;
  font-size: 12px;
  transition: background 0.2s ease, color 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}

.home-button { background: var(--primary); color: #fff; box-shadow: var(--shadow-sm); }
.home-button:hover { background: var(--primary-600); }

.form-group button[type="submit"] { background: var(--success); color: #fff; box-shadow: var(--shadow-sm); }
.form-group button[type="submit"]:hover { filter: brightness(0.95); }

.add-purchase-btn { background: var(--purple); color: #fff; box-shadow: var(--shadow-sm); }
.add-purchase-btn:hover { filter: brightness(0.95); }

.action-buttons { display: inline-flex; gap: 8px; }
.action-buttons .delete-btn { background: var(--danger); color: #fff; }
.action-buttons .delete-btn:hover { filter: brightness(0.95); }
.action-buttons .edit-btn { background: var(--primary); color: #fff; }
.action-buttons .edit-btn:hover { background: var(--primary-600); }

.remove-purchase-btn { background: var(--danger); color: #fff; padding: 8px 10px; }
.remove-purchase-btn:hover { filter: brightness(0.95); }

/* Sections */
.form-section,
.data-section {
  background: #fff;
  padding: var(--space-4);
  border-radius: var(--radius);
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--border);
  margin-bottom: 0px;
}

.form-group { margin-bottom: var(--space-3); }
.form-group label { font-weight: 600; color: var(--text); display: block; margin-bottom: 2px; }

.form-group input[type="number"],
.form-group input[type="text"],
.form-group select {
  width: 100%;
  padding: 10px 12px;
  font-size: 14px;
  border: 1px solid var(--border);
  border-radius: 8px;
  outline: none;
  background: #fff;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.form-group input:focus,
.form-group select:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(58, 134, 255, 0.15);
}

.purchase-input-row { display: flex; align-items: center; gap: 8px; margin-top: 8px; }

/* Analyze form (top section) refinements */
.form-section form { max-width: 920px; margin: 0 auto; }
.form-section .form-group { margin-bottom: var(--space-3); }
.form-section .form-group label { margin-bottom: 8px; display: inline-block; }
.form-section .form-group input::placeholder { color: #98a2b3; }
#sales_id { font-variant-numeric: tabular-nums; letter-spacing: 0.2px; }

.form-section .purchase-inputs { 
  display: grid; 
  gap: 10px; 
  padding: 12px; 
  border: 1px dashed var(--border); 
  border-radius: 8px; 
  background: rgba(58, 134, 255, 0.04);
}
.form-section .purchase-inputs label { margin-bottom: 2px; }
.form-section .purchase-input-row { display: flex; align-items: center; gap: 10px; }
.form-section .purchase-input-row input { flex: 1 1 auto; min-width: 0; }
.form-section .remove-purchase-btn { 
  width: 36px; height: 36px; padding: 0; border-radius: 8px; 
  display: inline-flex; align-items: center; justify-content: center; 
  font-size: 18px; line-height: 1; 
}
.form-section .add-purchase-btn { margin-top: 10px; }

.form-section .form-group button[type="submit"] { width: auto; }
.form-section .form-group:last-child { margin-top: 6px; }



/* Cards */
.analysis-card {
  border: 1px solid var(--border);
  padding: var(--space-3); /* reduced card padding */
  margin-bottom: var(--space-3); /* reduced spacing between cards */
  border-radius: 8px; /* slightly tighter radius */
  background: var(--card-bg);
  box-shadow: var(--shadow-sm);
}
.analysis-header-row { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; margin-bottom: var(--space-2); }
.analysis-header-row h3 { margin: 0; font-size: 15px; font-weight: 700; color: var(--text); line-height: 1.2; }
.analysis-header-row p { margin: 0; color: var(--muted); font-size: 12px; }
.analysis-header-row .action-buttons { margin-left: auto; }

/* Two-column content */
.analysis-content {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr)); /* perfect two-column grid */
  gap: var(--space-3);
  align-items: start;
}
.sales-column,
.purchase-column {
  flex: 1 1 320px;
  padding: var(--space-2); /* tighter inner padding */
  background: #fafbff;
  border: 1px solid var(--border);
  border-radius: 8px;
}
.analysis-content h4 {
  color: var(--primary);
  margin: 0 0 var(--space-2);
  font-size: 12px; /* smaller section title */
  font-weight: 700;
}

.analysis-content ul { list-style: none; margin: 0; padding: 0; }
.analysis-content ul li {
  display: grid;
  grid-template-columns: 48% 52%; /* consistent label/value widths */
  column-gap: 12px;
  align-items: baseline;
  padding: 8px 0;
  border-bottom: 1px dashed var(--border);
  font-size: 12px;
}
.analysis-content ul li:last-child { border-bottom: 0; }
.analysis-content ul li strong { color: var(--muted); font-weight: 600; }
.analysis-content ul li span { color: var(--text); }

.purchase-item-container { margin-bottom: 12px; padding-bottom: 10px; border-bottom: 1px solid var(--border); }
.purchase-item-container:last-of-type { border-bottom: 0; margin-bottom: 0; padding-bottom: 0; }
.purchase-detail-line {
  display: grid;
  grid-template-columns: 1fr 1fr; /* default: two columns */
  gap: 16px;
  margin-bottom: 6px;
  font-size: 12px;
}
.purchase-detail-line.three-col { grid-template-columns: 1fr 1fr 1fr; }
.purchase-detail-line.one-col { grid-template-columns: 1fr; }
.detail-group {
  display: grid;
  grid-template-columns: auto 1fr; /* label then value */
  align-items: baseline;
  gap: 6px;
  font-size: 12px;
}

/* Sales details inline then block layout */
.sales-rows { display: grid; gap: 8px; }
.sales-row-inline {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
  align-items: baseline;
}
.sales-row-inline .detail-group { grid-template-columns: auto 1fr; }
.sales-row-block .detail-group { grid-template-columns: auto 1fr; }

.analysis-content .total-row {
  font-weight: 700;
  margin-top: var(--space-3);
  padding-top: var(--space-2);
  border-top: 2px solid var(--primary);
  text-align: right;
  font-size: 12px;
  color: var(--text);
}

/* Table */
table { width: 100%; border-collapse: collapse; margin-top: var(--space-3); background: #fff; border-radius: var(--radius); overflow: hidden; box-shadow: var(--shadow-sm); }
th, td { padding: 10px 12px; text-align: left; border-bottom: 1px solid var(--border); font-size: 13px; }
th { background: var(--primary); color: #fff; font-weight: 700; letter-spacing: 0.3px; position: sticky; top: 0; z-index: 1; }
tr:last-child td { border-bottom: none; }
tbody tr:hover { background: var(--table-row); }

/* Responsive */
@media (max-width: 768px) {
  .container { padding: var(--space-4); }
  .analysis-content { flex-direction: column; gap: var(--space-3); }
  .sales-column, .purchase-column { flex: 1 1 auto; }
}

@media (max-width: 480px) {
  .container { margin: 20px auto; padding: var(--space-3); }
  .home-button, .form-group button, .action-buttons button, .action-buttons a { font-size: 12px; padding: 8px 12px; }
  th, td { font-size: 12px; padding: 8px 10px; }
}

/* Optional compact density mode: add `density-compact` to body or .container to enable */
.density-compact .container { padding: 16px; }
.density-compact .form-section,
.density-compact .data-section { padding: 14px; }
.density-compact .analysis-card { padding: 14px; }
.density-compact .home-button,
.density-compact .form-group button[type="submit"],
.density-compact .add-purchase-btn,
.density-compact .action-buttons button,
.density-compact .action-buttons a,
.density-compact .remove-purchase-btn { padding: 8px 10px; font-size: 13px; }
.density-compact .form-group input[type="number"],
.density-compact .form-group input[type="text"],
.density-compact .form-group select { padding: 8px 10px; font-size: 13px; }
.density-compact th, .density-compact td { padding: 8px 10px; font-size: 12px; }
.density-compact .analysis-content .total-row { margin-top: 10px; padding-top: 8px; font-size: 13px; }

/* Automatic dark mode (respects system preference) */
@media (prefers-color-scheme: dark) {
  :root {
    --bg: #0f172a;
    --card-bg: #111827;
    --text: #e5e7eb;
    --muted: #9ca3af;
    --primary: #5891ff;
    --primary-600: #3f7ef7;
    --success: #27b07a;
    --danger: #ef5f5f;
    --border: #273244;
    --table-row: #1f2937;
    --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.35);
    --shadow-md: 0 6px 18px rgba(0, 0, 0, 0.35);
    --shadow-lg: 0 12px 24px rgba(0, 0, 0, 0.4);
  }
  body { background: var(--bg); color: var(--text); }
  .container { background: var(--card-bg); }
  .form-section, .data-section, .analysis-card { background: var(--card-bg); border-color: var(--border); }
  .sales-column, .purchase-column { background: #0f1627; border-color: var(--border); }
  table { background: var(--card-bg); }
  th { background: var(--primary); color: #0b1220; }
}
        /* Custom styles for this page to align with global theme */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Aligns with global body font */
            background-color: #f0f2f5; /* Aligns with global body background */
            color: #333;
        }

        .container {
            width: 94%;
            max-width: 1860px; 
            margin: 40px auto;
            background: #ffffff;
            padding: 10px;
            border-radius: 12px; /* Smoother border-radius */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); /* Consistent shadow with modern-button */
            /* Removed 3D-specific animations and pseudo-elements */
        }

        .main-title {
            color: #ff0e0e; /* From .main-title in style.css */
            font-size: 2.5em; /* Adjusted for consistency, can be main-title size */
            font-weight: 700;
            text-align: center;
            margin-bottom: 25px;
            text-shadow: 2px 2px 3px #0d0c0c; /* From .main-title in style.css */
            letter-spacing: 1.5px;
        }

        h2 {
            color: #22223b; /* From h1 in style.css (general h1, not main-title) */
            font-weight: 700;
            letter-spacing: 1px;
            margin-top: 20px;
            margin-bottom: 15px;
        }

        .home-button {
            /* Aligns with button styles from style.css */
            display: inline-block;
            padding: 10px 20px;
            background: linear-gradient(145deg, #3a86ff, #4361ee);
            color: #fff;
            text-decoration: none;
            border-radius: 10px;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .home-button:hover {
            background: linear-gradient(145deg, #45a049, #3b8e40); /* Green on hover */
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            transform: translateY(-3px);
        }

        .form-section, .data-section {
            background: #fff; /* White background */
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(34,34,59,0.06); /* Lighter shadow for sections */
            margin-bottom: 20px;
            border: none;
        }

        .form-group label {
            font-weight: 600;
            color: #22223b; /* Consistent with other headings */
            font-size: 1em;
            margin-bottom: 8px;
        }

        .form-group input[type="number"],
        .form-group input[type="text"],
        .form-group select {
            padding: 10px;
            font-size: 12px;
            border: 1px solid #bfc0c0;
            border-radius: 6px;
            outline: none;
            margin-right: 8px;
            background: #fff;
            transition: border 0.2s;
            width: calc(100% - 16px); /* Adjusting for padding and border */
        }

        .form-group input:focus, .form-group select:focus {
            border: 1.5px solid #3a86ff;
        }

        /* Buttons using global classes where possible */
        .form-group button[type="submit"] {
            /* This button is for Analyze & Save */
            background: linear-gradient(90deg, #248a48 0%, #1eb930 100%); /* Excel green gradient */
            color: #fff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(58,134,255,0.08);
            transition: background 0.2s, box-shadow 0.2s;
        }

        .form-group button[type="submit"]:hover {
            background: linear-gradient(90deg, #1eb930 0%, #248a48 100%);
            box-shadow: 0 4px 16px rgba(58,134,255,0.15);
        }

        .add-purchase-btn {
            /* Aligns with new-entry-btn (purple) */
            background: linear-gradient(90deg, #7b34df 0%, #8d25e1 100%);
            color: #fff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(58,134,255,0.08);
            transition: background 0.2s, box-shadow 0.2s;
            margin-left: 0; /* Remove previous margin */
        }

        .add-purchase-btn:hover {
            background: linear-gradient(90deg, #8d25e1 0%, #7b34df 100%);
            box-shadow: 0 4px 16px rgba(58,134,255,0.15);
        }

        .action-buttons button, .action-buttons a {
            /* General button styling, will be overridden by delete/edit specific styles */
            padding: 7px 10px;
            font-size: 12px;
            color: #fff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(58,134,255,0.08);
            transition: background 0.2s, box-shadow 0.2s;
            text-decoration: none; /* For links acting as buttons */
            display: inline-block;
            text-align: center;
        }

        .delete-btn {
            background: linear-gradient(90deg, #ff4d4f 0%, #d71e3d 100%);
        }
        .delete-btn:hover {
            background: linear-gradient(90deg, #d21837 0%, #ff4d4f 100%);
            box-shadow: 0 4px 16px rgba(58,134,255,0.15);
        }

        .edit-btn {
            background: linear-gradient(90deg, #3a86ff 0%, #4361ee 100%); /* Default blue gradient */
            margin-left: 8px; /* Consistent margin */
        }
        .edit-btn:hover {
            background: linear-gradient(90deg, #4361ee 0%, #3a86ff 100%);
            box-shadow: 0 4px 16px rgba(58,134,255,0.15);
        }

        table {
            width: 100%;
            border-collapse: collapse; /* Use collapse for consistency with style.css */
            margin-top: 15px;
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(34,34,59,0.06);
        }

        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #e0e1dd; /* Consistent border */
            font-size: 12px; /* Smaller font for tables */
        }

        th {
            background: #3a86ff; /* Consistent header background */
            color: #fff;
            font-weight: 600;
            letter-spacing: 0.5px;
            font-size: 13px;
            position: sticky;
            top: 0;
            z-index: 1;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background: #e7f0fd; /* Consistent hover background */
        }

        .analysis-header-row {
            display: flex;
            align-items: center;
            gap: 15px; /* Adjusted gap */
            flex-wrap: wrap;
            margin-bottom: 10px;
        }

        .analysis-header-row h3,
        .analysis-header-row p {
            margin: 0;
        }

        .analysis-header-row .action-buttons {
            margin-top: 0;
            margin-left: auto;
            display: flex; /* Ensure buttons in row are also flex */
            gap: 8px; /* Gap between delete and edit */
        }

        .analysis-card {
            border: none; /* Remove border, rely on shadow */
            padding: 25px; /* Increased padding */
            margin-bottom: 30px; /* More space between cards */
            border-radius: 15px; /* More rounded corners */
            background-color: #ffffff;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15); /* Stronger, more prominent shadow */
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            overflow: hidden; /* Ensures shadows and borders are contained */
            position: relative;
        }

        .analysis-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.25);
        }

        /* Two-column layout refinement */
        .analysis-content {
            display: flex;
            gap: 40px; /* Increased gap between columns */
            margin-top: 25px; /* More space from header */
            flex-wrap: wrap;
            justify-content: space-between; /* Distribute space between columns */
        }

        .sales-column, .purchase-column {
            flex: 1; /* Allow columns to grow */
            min-width: 280px; /* Adjusted minimum width for better balance */
            padding: 20px; /* Increased padding */
            background-color: #f0f8ff; /* Lighter background for columns */
            border-radius: 10px; /* Rounded corners for inner columns */
            box-shadow: inset 0 0 12px rgba(0, 0, 0, 0.08); /* More subtle inner shadow */
            display: flex; /* Flex container for content inside columns */
            flex-direction: column;
            justify-content: space-between; /* Push total to bottom */
        }

        .analysis-content h4 {
            color: #3a86ff;
            margin-top: 0;
            margin-bottom: 15px; /* More space below heading */
            font-size: 1.2em; /* Slightly larger heading */
            border-bottom: 2px solid #e0e1dd; /* Separator line */
            padding-bottom: 8px;
        }

        .analysis-content ul {
            list-style: none;
            padding: 0;
            margin: 0;
            flex-grow: 1; /* Allow list to take available space */
        }

        .analysis-content ul li {
            margin-bottom: 10px; /* Space between different rows in the list */
            font-size: 1em;
            line-height: 1.5;
            display: flex; /* For sales, keep key-value alignment */
            justify-content: space-between;
            padding-bottom: 5px;
            border-bottom: 1px dotted #e9ecef;
        }

        .analysis-content ul li:last-child {
            border-bottom: none;
        }

        .analysis-content ul li strong {
            color: #555;
            flex-basis: 45%; /* Give strong a defined width */
            text-align: left;
            font-weight: 600;
        }
        .analysis-content ul li span {
            flex-basis: 55%;
            text-align: right;
            font-weight: 400;
        }

        /* New styles for purchase details alignment */
        .purchase-item-container {
            margin-bottom: 15px; /* Space between different purchase entries */
            padding-bottom: 10px;
            border-bottom: 1px solid #e0e1dd; /* Separator for each purchase entry */
        }

        .purchase-item-container:last-of-type {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .purchase-detail-line {
            display: flex;
            /* justify-content: space-between;  */
            justify-content: start;
            margin-bottom: 5px; /* Space between lines within a purchase detail */
            font-size: 0.95em;
        }

        .detail-group {
            display: flex; /* Makes the key and value align */
            align-items: baseline;
            gap: 5px; /* Space between strong and span */
            flex-basis: 48%; /* Adjust to control width of each group */
        }

        .purchase-detail-line strong {
            color: #555;
            /* flex-basis: 50%; */ /* Removed, now handled by detail-group */
            text-align: left;
            font-weight: 600;
        }

        .purchase-detail-line span {
            /* flex-basis: 50%; */ /* Removed, now handled by detail-group */
            text-align: right;
            font-weight: 400;
            flex-grow: 1; /* Allows the span to take up available space */
        }

        /* Input row for adding purchase IDs */
        .purchase-input-row { display: flex; align-items: center; gap: 8px; margin-top: 8px; }
        .remove-purchase-btn {
            background: linear-gradient(90deg, #ff4d4f 0%, #d71e3d 100%);
            color: #fff; border: none; border-radius: 6px; cursor: pointer; padding: 6px 10px;
            font-weight: 700; line-height: 1; box-shadow: 0 2px 8px rgba(58,134,255,0.08);
        }
        .remove-purchase-btn:hover { background: linear-gradient(90deg, #d21837 0%, #ff4d4f 100%); }

        .analysis-content .total-row {
            font-weight: 700; /* Bolder total */
            margin-top: 15px; /* Less space above total */
            padding-top: 10px;
            border-top: 2px solid #3a86ff; /* Stronger separator for total */
            text-align: right;
            font-size: 1em; /* Slightly smaller total font */
            color: #22223b;
        }

        /* Responsive adjustments from style.css */
        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }
            .analysis-content {
                flex-direction: column; /* Stack columns on smaller screens */
                gap: 20px;
            }
            .sales-column, .purchase-column {
                min-width: unset;
                width: 100%;
            }
            .analysis-card {
                padding: 15px;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.8em;
            }
            .container {
                margin: 20px auto;
                padding: 15px;
            }
            .form-group input, .form-group select {
                font-size: 11px;
                padding: 8px;
            }
            .form-group button, .action-buttons button, .action-buttons a {
                font-size: 11px;
                padding: 7px 12px;
            }
            th, td {
                font-size: 10px;
                padding: 6px;
            }
            .analysis-content ul li {
                font-size: 0.9em;
            }
            .analysis-content .total-row {
                font-size: 1em;
            }
        }

